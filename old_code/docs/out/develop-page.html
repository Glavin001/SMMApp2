<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>SMMApps Documentation</title>

    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/6.1/styles/sunburst.min.css">
    <link type="text/css" rel="stylesheet" href="assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="assets/css/print.css" media="print">
    

    <script type="text/javascript" src="assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="assets/js/lunr.min.js"></script>

    

    <script type="text/javascript">var BASE_URL = "";</script>
    <script type="text/javascript" src="assets/js/viewer.js"></script>

    
</head>
<body>
    <div id="page">
        <a name="top" />
        <header id="header">
            <h1><a href="">SMMApps Documentation</a></h1>
        </header>
        

<div id="sidebar">
    <form action="search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
    <nav id="toc">
        
    <ol>
    
        <li>
            <a href="installation.html#installation">Installation</a>
            
                
    <ol>
    
        <li>
            <a href="installation.html#requirements">Requirements</a>
            
        </li>
    
        <li>
            <a href="installation.html#installation-of-app-server">Installation of App Server</a>
            
        </li>
    
        <li>
            <a href="installation.html#running-app-server">Running App Server</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#for-developers">For Developers</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#create-your-own-development-branch">Create Your Own Development Branch</a>
            
                
    <ol>
    
        <li>
            <a href="developers.html#pulling-updating-from-remote-github">Pulling (Updating) from Remote (Github)</a>
            
        </li>
    
        <li>
            <a href="developers.html#pushing-saving-your-code-to-remote-github">Pushing (Saving) your code to Remote (Github)</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#on-branch-yourname">On branch yourname</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#on-branch-yourname">On branch yourname</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#untracked-files">Untracked files:</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#use-git-add-file-to-include-in-what-will-be-committed">(use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#on-branch-yourname">On branch yourname</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#changes-not-staged-for-commit">Changes not staged for commit:</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#use-git-add-file-to-update-what-will-be-committed">(use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#use-git-checkout-file-to-discard-changes-in-working-directory">(use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#on-branch-yourname">On branch yourname</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#changes-to-be-committed">Changes to be committed:</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="developers.html#use-git-reset-head-file-to-unstage">(use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
        <li>
            <a href="develop-page.html#developing-a-page">Developing a Page</a>
            
                
    <ol>
    
        <li>
            <a href="develop-page.html#introductions">Introductions</a>
            
        </li>
    
        <li>
            <a href="develop-page.html#structure-of-the-app">Structure of the App</a>
            
        </li>
    
        <li>
            <a href="develop-page.html#about-pages-or-views">About Pages (or Views)</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="troubleshooting.html#troubleshooting">Troubleshooting</a>
            
                
    <ol>
    
        <li>
            <a href="troubleshooting.html#installation">Installation</a>
            
        </li>
    
        <li>
            <a href="troubleshooting.html#running">Running</a>
            
        </li>
    
</ol>

            
        </li>
    
        <li>
            <a href="testing.html#test-benchmark">Test / Benchmark</a>
            
                
    <ol>
    
</ol>

            
        </li>
    
</ol>

    </nav>
    
    <nav id="links">
        <ul>
            
            <li><a href="https://github.com/Glavin001/SMMApp2">View on GitHub</a></li>
            
            <li><a href="https://github.com/Glavin001/SMMApp2/issues">Report an Issue</a></li>
            
        </ul>
    </nav>
    
</div>

        <div id="content">
            <h1 id="developing-a-page">Developing a Page</h1>
<h2 id="introductions">Introductions</h2>
<p>First thing to know is that we are using <a href="http://jade-lang.com/">Jade, the Node template engine,</a> and <a href="http://learnboost.github.io/stylus/docs/middleware.html">Stylus for more robust CSS</a>.
Furthermore, <a href="[http://expressjs.com/">Node&#39;s Express framework</a> is being used to serve the webpages and handle all HTTP requests.</p>
<h2 id="structure-of-the-app">Structure of the App</h2>
<p>The App starts on the repository&#39;s root directory, <code>/</code>. The Node.js server is the file <code>/app.js</code>.
The <code>/app.js</code> server sets up <a href="http://expressjs.com/">Express</a> and includes the file <code>/app/server/router.js</code> to handle the server requests.
The <code>/app/server/router.js</code> takes in the argument, <code>app</code> (which is a variable for the <a href="http://expressjs.com/api.html">Express application</a>), and binds all of the request handlers.
The <code>router.js</code> file is <em>very important</em> for modifying existing and adding new request handlers, even adding new pages/views (See below on how to add a new page).</p>
<h2 id="about-pages-or-views-">About Pages (or Views)</h2>
<p>Since we are using Node.js with Express, our web app <em>pages are views</em>. 
These views are <a href="http://expressjs.com/api.html#app.render">&quot;rendered&quot; with Express</a>.
All of our views are located in <code>/app/server/views</code>. </p>
<h3 id="adding-a-new-page-view">Adding a new Page/View</h3>
<p>There are a few steps to add new view to the app.</p>
<h4 id="1-create-a-jade-view">1) Create a Jade View</h4>
<p>Create a new file in <code>/app/server/views/</code> with the extension <code>.jade</code>.
For this tutorial we will call it <code>example.jade</code> at path <code>/app/server/views/example.jade</code>.</p>
<h4 id="2-editing-your-custom-jade-view">2) Editing Your Custom Jade View</h4>
<h5 id="2-1-basic-example">2.1) Basic Example</h5>
<p>The app already has a <code>layout_nav.jade</code> file which contains the foundation for each webpage and can be extended.
Here is the start of the contents of <code>example.jade</code>.</p>
<pre><code class="lang-jade">extends layout_nav
block header
block content
block scripts</code></pre>
<h5 id="2-2-including-external-files-in-jade-view">2.2) Including External Files in Jade View</h5>
<p>You can add external <code>CSS</code> files into <code>/app/public/css/</code> with either the extention <code>.css</code> or <code>.styl</code>. 
Note that <code>.styl</code> is for <a href="http://learnboost.github.io/stylus/">Stylus Express middleware</a> and allows for more robust CSS. 
The <code>.styl</code> CSS files will be &quot;compiled&quot; into <code>.css</code> files when requested, so treat <code>example.styl</code> as it&#39;s resulting <code>example.css</code> file when including.
You can include a custom CSS file into your Jade view by adding the following line to your <code>header</code> <a href="http://www.devthought.com/code/use-jade-blocks-not-layouts/">block</a>.
<code>link(rel=&#39;stylesheet&#39;, href=&#39;/css/example.css&#39;)</code>
The resulting <code>example.jade</code> is:</p>
<pre><code class="lang-jade">extends layout_nav
block header
  link(rel=&#39;stylesheet&#39;, href=&#39;/css/example.css&#39;)
block content
block scripts</code></pre>
<p>External <code>JavaScript</code> files into <code>/app/public/js/</code>. 
You can include a custom JavaScript file into your Jade view by adding the following line to your <code>scripts</code> <a href="http://www.devthought.com/code/use-jade-blocks-not-layouts/">block</a>.
<code>script(src=&#39;/js/example.js&#39;)</code>
The resulting <code>example.jade</code> is:</p>
<pre><code class="lang-jade">extends layout_nav
block header
  link(rel=&#39;stylesheet&#39;, href=&#39;/css/example.css&#39;)
block content
block scripts
 script(src=&#39;/js/example.js&#39;)</code></pre>
<p>Notice that <code>/js/example.js</code> and <code>/css/example.css</code> equate to <code>/app/public/js/example.js</code> and <code>/app/public/css/example.styl</code> respectively.</p>
<h4 id="3-configure-router">3) Configure Router</h4>
<p>Now that you have created your new custom view you must <a href="http://expressjs.com/api.html#app.render">allow Express to &quot;render&quot; your view to your users when requested</a>.</p>
<h5 id="3-1-basic">3.1) Basic</h5>
<p>Changes are made inside of <code>/app/server/router.js</code> module:</p>
<pre><code class="lang-javascript">module.exports = function(app) {
// existing code....
// *** PUT NEW CODE HERE ****
}</code></pre>
<p>Here is a simple GET request handler for your example view. </p>
<pre><code class="lang-javascript">    app.get(&#39;/example&#39;, function(req, res) {
        res.render(&#39;example&#39;, {
            title : &#39;Example Title&#39;,
            countries : CT,
            udata : req.session.user
        });
    });</code></pre>
<p>When the user requests the page <code>/example</code> Express receives a <code>GET</code> request for that resource and it triggers that event handler code shown above.
You may change the <code>app.get(&#39;/example&#39;, function(req, res) { }</code> to <code>app.get(&#39;/another&#39;, function(req, res) { }</code> handle <code>another</code> request.
Express then calls your <a href="http://stackoverflow.com/a/9644980">callback function</a> with the arguments <code>req</code> and <code>res</code> which refer to <a href="http://expressjs.com/api.html#req.params">request</a> and <a href="http://expressjs.com/api.html#res.status">response</a>.
You can extract more information about the request from the request variable, <code>req</code>, and then output to the user through the response variable, <code>res</code>.
<a href="http://expressjs.com/api.html#res.render">Rendering a view to the user is as simple as <code>res.render(&#39;filename&#39;)</code>.</a>
<code>res.render(&#39;example&#39;);</code> will render the view <code>/app/server/views/example.jade</code>.
The Jade template view can use variables that are passed in the second parameter or <code>res.render</code>.
For example, <code>res.render(&#39;example&#39;, { title: &#39;Example title&#39; });</code> passes the variable <code>title</code> to be used in the rendering of the <code>example.jade</code> file.
You can see where it is used in the Jade template <code>/app/server/layout_nav.jade</code> with <code>title #{title}</code>.
The <code>#{title}</code> is printing the contents of the variable. See <a href="http://jade-lang.com/reference/">Jade Language Reference for more information</a>.</p>
<h5 id="3-2-page-requiring-login">3.2) Page Requiring Login</h5>
<p>It may be desirable to restrict access to a certain page to only users who are logged in.
This can now be easily achieved with <code>requiresLogin</code> function.
<code>requiresLogin</code> takes in three (3) parameters: <code>request</code>, <code>response</code>, and <code>callback</code> for cases where user is already logged in.
The <code>callback</code> takes two (2) parameters: <code>request</code>, <code>response</code>. 
Notice the Express <code>request</code> and <code>response</code> variables are passed along to <code>requiresLogin</code> and then onto your callback function.
Here is the example from above, now with the added requirement of user login, if they are not already logged in.</p>
<pre><code class="lang-javascript">    app.get(&#39;/example&#39;, function(req, res) {
        requiresLogin(req, res, function(req, res) {
            res.render(&#39;example&#39;, {
                title : &#39;Example title&#39;,
                countries : CT,
                udata : req.session.user
            });
        });
    });</code></pre>
<hr>
<p>Hopefully this documentation is detailed enough. <a href="https://github.com/Glavin001/SMMApp2/issues?labels=question">If you have any additional questions, please make a new issue and add the <code>Question</code> label.</a></p>




        </div>
        <footer id="footer">
            Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
            <a href="#top">Back to top</a> - <a href="all.html">Everything on a single page</a>
            - <a href="?print=1">Print current page</a> - <a href="all.html?print=1">Print all pages</a>
            
                <a href="https://github.com/Glavin001/SMMApp2" id="fork-me-on-github">Fork me on Github</a>
            
        </footer>
    </div>
</body>
</html>
